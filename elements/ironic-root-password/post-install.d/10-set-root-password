#!/bin/bash
# Set root password for the Ironic Python Agent ISO
# This element sets the root password to facilitate testing and development.

set -euxo pipefail

# Use environment variable if provided, otherwise default to "ironic"
ROOT_PASSWORD="${IRONIC_ROOT_PASSWORD:-ironic}"

# Use chpasswd to set the root password
# This is more reliable than using passwd directly in scripts
echo "root:${ROOT_PASSWORD}" | chpasswd

echo "Root password has been set."
